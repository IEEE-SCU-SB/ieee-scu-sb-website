"use client";
import Image from "next/image";
import map from "@/public/assets/map.svg";
import { MapPinIcon } from "@heroicons/react/24/solid";
import { useIntersectionObserver } from "@/hooks/useIntersectionObserver";

export default function Map() {
  const activeElement = useIntersectionObserver(["map"]);

  return (
    <div className="relative" id="map">
      <div className="relative w-fit">
        <div className="absolute top-[34.4%] right-[10%] w-[35%]">
          <MapPinIcon
            className={`w-[20%] absolute -left-[8.4%] bottom-[3.2%] text-sky-500 z-10 transition duration-700
          ${activeElement === "map" ? "scale-100" : "scale-0"}`}
          />
          <svg
            viewBox="0 0 198 88"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className={`clip ${
              activeElement === "map"
                ? "animate-reveal [animation-delay:400ms]"
                : ""
            }`}
          >
            <rect
              x="98.7222"
              y="1.21045"
              width="98"
              height="22"
              rx="11"
              fill="#2D79B7"
              fillOpacity="0.8"
            />
            <rect
              x="98.7222"
              y="1.21045"
              width="98"
              height="22"
              rx="11"
              stroke="#2D79B7"
            />
            <path
              d="M112.498 7.98318V16.7104H111.181V7.98318H112.498ZM114.655 16.7104V7.98318H120.127V9.1167H115.972V11.7758H119.841V12.9051H115.972V15.5769H120.178V16.7104H114.655ZM122.126 16.7104V7.98318H127.597V9.1167H123.443V11.7758H127.312V12.9051H123.443V15.5769H127.649V16.7104H122.126ZM129.596 16.7104V7.98318H135.068V9.1167H130.913V11.7758H134.782V12.9051H130.913V15.5769H135.119V16.7104H129.596ZM145.243 10.2758C145.197 9.87238 145.01 9.55988 144.68 9.33829C144.35 9.11386 143.936 9.00164 143.436 9.00164C143.078 9.00164 142.768 9.05846 142.507 9.1721C142.245 9.28289 142.042 9.4363 141.897 9.63232C141.755 9.82551 141.684 10.0457 141.684 10.2928C141.684 10.5002 141.733 10.6792 141.829 10.8298C141.929 10.9803 142.058 11.1068 142.217 11.209C142.379 11.3085 142.552 11.3923 142.737 11.4604C142.922 11.5258 143.099 11.5798 143.27 11.6224L144.122 11.844C144.4 11.9122 144.686 12.0045 144.978 12.121C145.271 12.2374 145.542 12.3908 145.792 12.5812C146.042 12.7715 146.244 13.0073 146.397 13.2886C146.554 13.5698 146.632 13.9065 146.632 14.2985C146.632 14.7928 146.504 15.2318 146.248 15.6153C145.995 15.9988 145.627 16.3014 145.145 16.5229C144.664 16.7445 144.083 16.8553 143.402 16.8553C142.748 16.8553 142.183 16.7516 141.706 16.5443C141.228 16.3369 140.855 16.0428 140.585 15.6622C140.315 15.2786 140.166 14.8241 140.137 14.2985H141.458C141.484 14.6139 141.586 14.8766 141.765 15.0869C141.947 15.2943 142.179 15.4491 142.46 15.5514C142.744 15.6508 143.055 15.7005 143.393 15.7005C143.765 15.7005 144.096 15.6423 144.386 15.5258C144.679 15.4065 144.909 15.2417 145.076 15.0315C145.244 14.8184 145.328 14.5698 145.328 14.2857C145.328 14.0272 145.254 13.8156 145.106 13.6508C144.961 13.486 144.764 13.3497 144.514 13.2417C144.267 13.1337 143.987 13.0386 143.674 12.9562L142.643 12.6749C141.944 12.4846 141.39 12.2048 140.981 11.8354C140.575 11.4661 140.372 10.9775 140.372 10.3695C140.372 9.8667 140.508 9.42778 140.781 9.05278C141.054 8.67778 141.423 8.38659 141.889 8.1792C142.355 7.96897 142.88 7.86386 143.466 7.86386C144.056 7.86386 144.578 7.96755 145.029 8.17494C145.484 8.38232 145.842 8.66784 146.103 9.03147C146.365 9.39227 146.501 9.80704 146.512 10.2758H145.243ZM155.694 10.8212H154.364C154.313 10.5372 154.218 10.2872 154.079 10.0712C153.94 9.85534 153.769 9.6721 153.567 9.52153C153.366 9.37096 153.14 9.25732 152.89 9.18062C152.643 9.10391 152.38 9.06556 152.102 9.06556C151.599 9.06556 151.148 9.19198 150.751 9.44482C150.356 9.69767 150.043 10.0684 149.813 10.557C149.586 11.0457 149.472 11.6423 149.472 12.3468C149.472 13.057 149.586 13.6565 149.813 14.1451C150.043 14.6337 150.357 15.0031 150.755 15.2531C151.153 15.5031 151.6 15.6281 152.097 15.6281C152.373 15.6281 152.634 15.5911 152.881 15.5173C153.131 15.4406 153.357 15.3283 153.559 15.1806C153.761 15.0329 153.931 14.8525 154.07 14.6394C154.212 14.4235 154.31 14.1764 154.364 13.8979L155.694 13.9022C155.623 14.3312 155.485 14.7261 155.28 15.0869C155.079 15.4448 154.819 15.7545 154.501 16.0158C154.185 16.2744 153.825 16.4747 153.418 16.6167C153.012 16.7587 152.569 16.8298 152.089 16.8298C151.333 16.8298 150.66 16.6508 150.069 16.2928C149.478 15.932 149.012 15.4164 148.671 14.746C148.333 14.0755 148.164 13.2758 148.164 12.3468C148.164 11.415 148.334 10.6153 148.675 9.94766C149.016 9.27721 149.482 8.76301 150.073 8.40505C150.664 8.04426 151.336 7.86386 152.089 7.86386C152.552 7.86386 152.984 7.93062 153.384 8.06414C153.788 8.19482 154.15 8.38801 154.471 8.64369C154.792 8.89653 155.057 9.20619 155.268 9.57266C155.478 9.9363 155.62 10.3525 155.694 10.8212ZM163.122 7.98318H164.443V13.7232C164.443 14.334 164.299 14.8752 164.012 15.3468C163.725 15.8156 163.322 16.1849 162.802 16.4548C162.282 16.7218 161.673 16.8553 160.974 16.8553C160.278 16.8553 159.67 16.7218 159.15 16.4548C158.63 16.1849 158.227 15.8156 157.94 15.3468C157.653 14.8752 157.509 14.334 157.509 13.7232V7.98318H158.826V13.6167C158.826 14.0116 158.913 14.3624 159.086 14.6693C159.262 14.9761 159.511 15.2176 159.832 15.3937C160.153 15.567 160.534 15.6536 160.974 15.6536C161.417 15.6536 161.799 15.567 162.12 15.3937C162.444 15.2176 162.691 14.9761 162.862 14.6693C163.035 14.3624 163.122 14.0116 163.122 13.6167V7.98318ZM174.773 10.2758C174.727 9.87238 174.54 9.55988 174.21 9.33829C173.881 9.11386 173.466 9.00164 172.966 9.00164C172.608 9.00164 172.298 9.05846 172.037 9.1721C171.776 9.28289 171.573 9.4363 171.428 9.63232C171.286 9.82551 171.215 10.0457 171.215 10.2928C171.215 10.5002 171.263 10.6792 171.36 10.8298C171.459 10.9803 171.588 11.1068 171.747 11.209C171.909 11.3085 172.083 11.3923 172.267 11.4604C172.452 11.5258 172.629 11.5798 172.8 11.6224L173.652 11.844C173.931 11.9122 174.216 12.0045 174.509 12.121C174.801 12.2374 175.073 12.3908 175.323 12.5812C175.573 12.7715 175.774 13.0073 175.928 13.2886C176.084 13.5698 176.162 13.9065 176.162 14.2985C176.162 14.7928 176.034 15.2318 175.779 15.6153C175.526 15.9988 175.158 16.3014 174.675 16.5229C174.195 16.7445 173.614 16.8553 172.932 16.8553C172.279 16.8553 171.713 16.7516 171.236 16.5443C170.759 16.3369 170.385 16.0428 170.115 15.6622C169.845 15.2786 169.696 14.8241 169.668 14.2985H170.989C171.014 14.6139 171.117 14.8766 171.296 15.0869C171.477 15.2943 171.709 15.4491 171.99 15.5514C172.274 15.6508 172.585 15.7005 172.923 15.7005C173.296 15.7005 173.627 15.6423 173.916 15.5258C174.209 15.4065 174.439 15.2417 174.607 15.0315C174.774 14.8184 174.858 14.5698 174.858 14.2857C174.858 14.0272 174.784 13.8156 174.636 13.6508C174.492 13.486 174.294 13.3497 174.044 13.2417C173.797 13.1337 173.517 13.0386 173.205 12.9562L172.173 12.6749C171.475 12.4846 170.921 12.2048 170.511 11.8354C170.105 11.4661 169.902 10.9775 169.902 10.3695C169.902 9.8667 170.038 9.42778 170.311 9.05278C170.584 8.67778 170.953 8.38659 171.419 8.1792C171.885 7.96897 172.411 7.86386 172.996 7.86386C173.587 7.86386 174.108 7.96755 174.56 8.17494C175.014 8.38232 175.372 8.66784 175.634 9.03147C175.895 9.39227 176.031 9.80704 176.043 10.2758H174.773ZM177.976 16.7104V7.98318H181.172C181.791 7.98318 182.304 8.08545 182.71 8.28999C183.116 8.4917 183.42 8.76585 183.622 9.11244C183.824 9.45619 183.924 9.84397 183.924 10.2758C183.924 10.6394 183.858 10.9462 183.724 11.1962C183.591 11.4434 183.412 11.6423 183.187 11.7928C182.966 11.9406 182.721 12.0485 182.454 12.1167V12.2019C182.744 12.2161 183.027 12.3099 183.302 12.4832C183.581 12.6536 183.811 12.8965 183.993 13.2119C184.174 13.5272 184.265 13.9107 184.265 14.3624C184.265 14.8085 184.16 15.209 183.95 15.5641C183.743 15.9164 183.422 16.1962 182.987 16.4036C182.552 16.6082 181.997 16.7104 181.321 16.7104H177.976ZM179.292 15.5812H181.193C181.824 15.5812 182.275 15.459 182.548 15.2147C182.821 14.9704 182.957 14.665 182.957 14.2985C182.957 14.0229 182.888 13.7701 182.748 13.54C182.609 13.3099 182.41 13.1266 182.152 12.9903C181.896 12.8539 181.592 12.7857 181.24 12.7857H179.292V15.5812ZM179.292 11.7587H181.057C181.352 11.7587 181.618 11.7019 181.853 11.5883C182.092 11.4747 182.281 11.3156 182.42 11.111C182.562 10.9036 182.633 10.6593 182.633 10.3781C182.633 10.0173 182.507 9.71471 182.254 9.47039C182.001 9.22607 181.613 9.10391 181.091 9.10391H179.292V11.7587Z"
              fill="white"
            />
            <g filter="url(#filter0_d_573_1700)">
              <circle cx="89.8546" cy="11.3966" r="3" fill="#2D79B7" />
            </g>
            <g filter="url(#filter1_d_573_1700)">
              <path
                d="M4.68359 79.5509L37.2249 11.3406H84.6543"
                stroke="#2D79B7"
                strokeDasharray="5 5"
              />
            </g>
            <defs>
              <filter
                id="filter0_d_573_1700"
                x="82.8546"
                y="8.39661"
                width="14"
                height="14"
                filterUnits="userSpaceOnUse"
                colorInterpolationFilters="sRGB"
              >
                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset dy="4" />
                <feGaussianBlur stdDeviation="2" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_573_1700"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_573_1700"
                  result="shape"
                />
              </filter>
              <filter
                id="filter1_d_573_1700"
                x="0.2323"
                y="10.8406"
                width="88.4221"
                height="76.9257"
                filterUnits="userSpaceOnUse"
                colorInterpolationFilters="sRGB"
              >
                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset dy="4" />
                <feGaussianBlur stdDeviation="2" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_573_1700"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_573_1700"
                  result="shape"
                />
              </filter>
            </defs>
          </svg>
        </div>
        <Image
          src={map}
          alt="Our location in the map"
          unoptimized={true}
          quality={100}
          className="w-full max-w-[800px]"
        />
      </div>

      <div className="absolute bottom-0 right-0 text-slate-600 dark:text-slate-400 text-[8px] sm:text-xs md:text-sm">
        <p>
          <span className="text-primary">| </span> Suez Canal University,
          Ismailia, Egypt
        </p>
      </div>
    </div>
  );
}
